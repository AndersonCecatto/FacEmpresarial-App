{"remainingRequest":"C:\\Users\\Anderson\\Desktop\\FacEmpresarial\\fac\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Anderson\\Desktop\\FacEmpresarial\\fac\\src\\components\\Inicial\\CadastrarEditarTopicoComponent.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Anderson\\Desktop\\FacEmpresarial\\fac\\src\\components\\Inicial\\CadastrarEditarTopicoComponent.vue","mtime":1679280123835},{"path":"C:\\Users\\Anderson\\Desktop\\FacEmpresarial\\fac\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Anderson\\Desktop\\FacEmpresarial\\fac\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Anderson\\Desktop\\FacEmpresarial\\fac\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Anderson\\Desktop\\FacEmpresarial\\fac\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCBhcGkgZnJvbSAnQC9zZXJ2aWNlcy9hcGkuanMnDQppbXBvcnQgRGlhbG9nQ29tcG9uZW50IGZyb20gJy4uL0ZpZWxkcy9EaWFsb2dDb21wb25lbnQudnVlJw0KaW1wb3J0IExvYWRDb21wb25lbnQgZnJvbSAnLi4vRmllbGRzL0xvYWRDb21wb25lbnQudnVlJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGNvbXBvbmVudHM6IHsgRGlhbG9nQ29tcG9uZW50LCBMb2FkQ29tcG9uZW50IH0sDQogICAgbmFtZTogJ0NhZGFzdHJhckVkaXRhclRvcGljb0NvbXBvbmVudCcsDQogICAgZGF0YTogKCkgPT4gKHsNCiAgICAgICAgdGl0dWxvRGlhbG9nOiAnVMOzcGljbycsDQogICAgICAgIHRpdHVsbzogbnVsbCwNCiAgICAgICAgaW1hZ2VtOiBudWxsLA0KICAgICAgICBkZXNjcmljYW86IG51bGwsDQogICAgICAgIGxvYWRlcjogZmFsc2UsDQogICAgICAgIERhZG9zSW1hZ2U6IFtdLA0KICAgICAgICByZXF1aXJlZDogWw0KICAgICAgICAgICAgdiA9PiAhIXYgfHwgJ0NhbXBvIE9icmlnYXTDs3JpbycNCiAgICAgICAgXSwNCiAgICAgICAgcmVxdWlyZWREZXNjcmljYW86IFsNCiAgICAgICAgICAgIHYgPT4gISF2IHx8ICdDYW1wbyBPYnJpZ2F0w7NyaW8nLA0KICAgICAgICAgICAgdiA9PiB2Lmxlbmd0aCA8IDUwMDAgfHwgJ01heGltbyA1MDAwIGNhcmFjdGVyZXMnDQogICAgICAgIF0NCiAgICB9KSwNCg0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgb25GaWxlUGlja2VkKGUpIHsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdGhpcy5EYWRvc0ltYWdlID0gW10NCg0KICAgICAgICAgICAgaWYgKGUgPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBlLmZvckVhY2goZWxlbWVudCA9PiB7DQogICAgICAgICAgICAgICAgaWYoZWxlbWVudC5uYW1lLmxhc3RJbmRleE9mKCcuJykgPD0gMCkgew0KICAgICAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgY29uc3QgZnIgPSBuZXcgRmlsZVJlYWRlciAoKQ0KICAgICAgICAgICAgICAgIGZyLnJlYWRBc0RhdGFVUkwoZWxlbWVudCkNCiAgICAgICAgICAgICAgICBmci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLkRhZG9zSW1hZ2UucHVzaCgNCiAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBJZDogZWxlbWVudC5pZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBOb21lOiBlbGVtZW50Lm5hbWUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgSW1hZ2VtOiB3aW5kb3cuYnRvYShmci5yZXN1bHQpDQogICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCg0KICAgICAgICBsaW1wYXJDYW1wb3MoKSB7DQogICAgICAgICAgICB0aGlzLnRpdHVsbyA9IG51bGwNCiAgICAgICAgICAgIHRoaXMuZGVzY3JpY2FvID0gbnVsbA0KICAgICAgICB9LA0KDQogICAgICAgIGNsb3NlRGlhbG9nKCkgew0KICAgICAgICAgICAgdGhpcy5saW1wYXJDYW1wb3MoKQ0KICAgICAgICAgICAgdGhpcy4kZW1pdCgnY2xvc2UnLCBmYWxzZSkNCiAgICAgICAgfSwNCg0KICAgICAgICBBY2FvKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuYWNhbyA9PSAnRWRpdGFyJykgew0KICAgICAgICAgICAgICAgIHRoaXMuRWRpdGFyKCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLlNhbHZhcigpDQogICAgICAgICAgICB9DQogICAgICAgIH0sDQoNCiAgICAgICAgU2FsdmFyKCkgew0KICAgICAgICAgICAgaWYgKCF0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKSkgDQogICAgICAgICAgICAgICAgcmV0dXJuDQoNCiAgICAgICAgICAgIHRoaXMubG9hZGVyID0gIXRoaXMubG9hZGVyOw0KDQogICAgICAgICAgICBhcGkucG9zdCgnVG9waWNvJywNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBUaXR1bG86IHRoaXMudGl0dWxvLA0KICAgICAgICAgICAgICAgIERlc2NyaWNhbzogdGhpcy5kZXNjcmljYW8sDQogICAgICAgICAgICAgICAgTWVudUlkOiB0aGlzLm1lbnVJZCwNCiAgICAgICAgICAgICAgICBJbWFnZW5zOiB0aGlzLkRhZG9zSW1hZ2UNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnc2FsdmFyJywgeyBzdWNjZXNzOiB0cnVlLCByZXNwb25zZTogcmVzcG9uc2UgfSkNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NhbHZhcicsIHsgc3VjY2VzczogZmFsc2UsIHJlc3BvbnNlOiBlcnJvciB9KQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHRoaXMubG9hZGVyID0gIXRoaXMubG9hZGVyKQ0KICAgICAgICB9LA0KDQogICAgICAgIEVkaXRhcigpIHsNCiAgICAgICAgICAgIGlmICghdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpDQogICAgICAgICAgICAgICAgcmV0dXJuDQoNCiAgICAgICAgICAgIHRoaXMubG9hZGVyID0gIXRoaXMubG9hZGVyOw0KDQogICAgICAgICAgICBhcGkucHV0KCdUb3BpY28nLA0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgIElkOiB0aGlzLml0ZW0uY29kaWdvLA0KICAgICAgICAgICAgICAgIFRpdHVsbzogdGhpcy50aXR1bG8sDQogICAgICAgICAgICAgICAgRGVzY3JpY2FvOiB0aGlzLmRlc2NyaWNhbywNCiAgICAgICAgICAgICAgICBNZW51SWQ6IHRoaXMubWVudUlkLA0KICAgICAgICAgICAgICAgIEltYWdlbnM6IHRoaXMuRGFkb3NJbWFnZQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsNCiAgICAgICAgICAgICAgICBkZWJ1Z2dlcg0KICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NhbHZhcicsIHsgc3VjY2VzczogdHJ1ZSwgcmVzcG9uc2U6IHJlc3BvbnNlIH0pDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsNCiAgICAgICAgICAgICAgICBkZWJ1Z2dlcg0KICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3NhbHZhcicsIHsgc3VjY2VzczogZmFsc2UsIHJlc3BvbnNlOiBlcnJvciB9KQ0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHRoaXMubG9hZGVyID0gIXRoaXMubG9hZGVyKQ0KICAgICAgICB9LA0KICAgIH0sDQoNCiAgICB3YXRjaDogew0KICAgICAgICBkaWFsb2codmFsKSB7DQoNCiAgICAgICAgICAgIGlmICghdmFsKSByZXR1cm4NCg0KICAgICAgICAgICAgdGhpcy5pbWFnZW0gPSBudWxsDQogICAgICAgICAgICB0aGlzLkRhZG9zSW1hZ2UgPSBbXQ0KDQogICAgICAgICAgICBpZiAodGhpcy5hY2FvICE9ICdFZGl0YXInKSB7DQogICAgICAgICAgICAgICAgdGhpcy5saW1wYXJDYW1wb3MoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSANCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB0aGlzLnRpdHVsbyA9IHRoaXMuaXRlbS50aXR1bG8sDQogICAgICAgICAgICAgICAgdGhpcy5kZXNjcmljYW8gPSB0aGlzLml0ZW0uZGVzY3JpY2FvDQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KDQogICAgcHJvcHM6IHsNCiAgICAgICAgZGlhbG9nOiBCb29sZWFuLA0KICAgICAgICBtZW51SWQ6IE51bWJlciwNCiAgICAgICAgaXRlbTogT2JqZWN0LA0KICAgICAgICBhY2FvOiBTdHJpbmcNCiAgICB9DQp9DQo="},{"version":3,"sources":["CadastrarEditarTopicoComponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CadastrarEditarTopicoComponent.vue","sourceRoot":"src/components/Inicial","sourcesContent":["<template>\r\n    <dialog-component\r\n        :tituloDialog=\"tituloDialog\"\r\n        :dialog=\"dialog\"\r\n        @close=\"closeDialog\"\r\n    >\r\n        <template v-slot:text>\r\n            <v-form\r\n                ref=\"form\" \r\n                class=\"px-4 mt-3\"\r\n            >\r\n                <v-text-field\r\n                    v-model=\"titulo\"\r\n                    label=\"Titulo\"\r\n                    prepend-icon=\"mdi-text-box-edit\"\r\n                    :rules=\"required\"\r\n                />\r\n                <v-textarea\r\n                    v-model=\"descricao\"\r\n                    label=\"Descrição\"\r\n                    prepend-icon=\"mdi-text-box-edit\"\r\n                    counter=\"5000\"\r\n                    :rules=\"requiredDescricao\"\r\n                />\r\n                <v-file-input\r\n                    v-model=\"imagem\"\r\n                    accept=\"image/*\"\r\n                    label=\"Imagem\"\r\n                    prepend-icon=\"mdi-camera\"\r\n                    @change=\"onFilePicked\"\r\n                    multiple\r\n                />\r\n            </v-form>\r\n        </template>\r\n        <template v-slot:actions>\r\n            <v-btn\r\n                color=\"green darken-1\"\r\n                text\r\n                @click=\"Acao()\"\r\n                >\r\n                Salvar\r\n            </v-btn>\r\n        </template>\r\n        <load-component :Ativo=\"loader\"/>\r\n    </dialog-component>\r\n</template>\r\n<script>\r\n\r\nimport api from '@/services/api.js'\r\nimport DialogComponent from '../Fields/DialogComponent.vue'\r\nimport LoadComponent from '../Fields/LoadComponent.vue'\r\n\r\nexport default {\r\n  components: { DialogComponent, LoadComponent },\r\n    name: 'CadastrarEditarTopicoComponent',\r\n    data: () => ({\r\n        tituloDialog: 'Tópico',\r\n        titulo: null,\r\n        imagem: null,\r\n        descricao: null,\r\n        loader: false,\r\n        DadosImage: [],\r\n        required: [\r\n            v => !!v || 'Campo Obrigatório'\r\n        ],\r\n        requiredDescricao: [\r\n            v => !!v || 'Campo Obrigatório',\r\n            v => v.length < 5000 || 'Maximo 5000 caracteres'\r\n        ]\r\n    }),\r\n\r\n    methods: {\r\n        onFilePicked(e) {\r\n            \r\n            this.DadosImage = []\r\n\r\n            if (e == null) {\r\n                return\r\n            }\r\n\r\n            e.forEach(element => {\r\n                if(element.name.lastIndexOf('.') <= 0) {\r\n                    return\r\n                }\r\n                const fr = new FileReader ()\r\n                fr.readAsDataURL(element)\r\n                fr.addEventListener('load', () => {\r\n                    this.DadosImage.push(\r\n                        {\r\n                            Id: element.id,\r\n                            Nome: element.name,\r\n                            Imagem: window.btoa(fr.result)\r\n                        })\r\n                })\r\n            });\r\n        },\r\n\r\n        limparCampos() {\r\n            this.titulo = null\r\n            this.descricao = null\r\n        },\r\n\r\n        closeDialog() {\r\n            this.limparCampos()\r\n            this.$emit('close', false)\r\n        },\r\n\r\n        Acao() {\r\n            if (this.acao == 'Editar') {\r\n                this.Editar()\r\n            }\r\n            else\r\n            {\r\n                this.Salvar()\r\n            }\r\n        },\r\n\r\n        Salvar() {\r\n            if (!this.$refs.form.validate()) \r\n                return\r\n\r\n            this.loader = !this.loader;\r\n\r\n            api.post('Topico',\r\n            {\r\n                Titulo: this.titulo,\r\n                Descricao: this.descricao,\r\n                MenuId: this.menuId,\r\n                Imagens: this.DadosImage\r\n            })\r\n            .then(response => {\r\n                this.$emit('salvar', { success: true, response: response })\r\n            })\r\n            .catch(error => {\r\n                this.$emit('salvar', { success: false, response: error })\r\n                console.log(error)\r\n            })\r\n            .finally(() => this.loader = !this.loader)\r\n        },\r\n\r\n        Editar() {\r\n            if (!this.$refs.form.validate())\r\n                return\r\n\r\n            this.loader = !this.loader;\r\n\r\n            api.put('Topico',\r\n            {\r\n                Id: this.item.codigo,\r\n                Titulo: this.titulo,\r\n                Descricao: this.descricao,\r\n                MenuId: this.menuId,\r\n                Imagens: this.DadosImage\r\n            })\r\n            .then(response => {\r\n                debugger\r\n                this.$emit('salvar', { success: true, response: response })\r\n            })\r\n            .catch(error => {\r\n                debugger\r\n                this.$emit('salvar', { success: false, response: error })\r\n                console.log(error)\r\n            })\r\n            .finally(() => this.loader = !this.loader)\r\n        },\r\n    },\r\n\r\n    watch: {\r\n        dialog(val) {\r\n\r\n            if (!val) return\r\n\r\n            this.imagem = null\r\n            this.DadosImage = []\r\n\r\n            if (this.acao != 'Editar') {\r\n                this.limparCampos()\r\n            }\r\n            else \r\n            {\r\n                this.titulo = this.item.titulo,\r\n                this.descricao = this.item.descricao\r\n            }\r\n        }\r\n    },\r\n\r\n    props: {\r\n        dialog: Boolean,\r\n        menuId: Number,\r\n        item: Object,\r\n        acao: String\r\n    }\r\n}\r\n</script>\r\n<style>\r\n    \r\n</style>"]}]}